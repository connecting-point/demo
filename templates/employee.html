<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Details - {{ employee.name }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary-color: #4CAF50;
      --primary-dark: #388E3C;
      --secondary-color: #607D8B;
      --light-bg: #e8f5e9;
      --card-bg: #ffffff;
      --text-dark: #212121;
      --text-muted: #757575;
      --border-light: #e0e0e0;
      --shadow-light: 0 2px 4px rgba(0,0,0,0.08);
      --shadow-medium: 0 4px 8px rgba(0,0,0,0.1);
      --info-bg: #e0f2f1;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--light-bg);
      color: var(--text-dark);
      line-height: 1.6;
    }
    .container { max-width: 800px; padding: 2.5rem 1rem; }
    .page-header {
      background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
      color: #fff; padding: 1.5rem 2rem; border-radius: 12px;
      box-shadow: var(--shadow-medium); margin-bottom: 2.5rem;
      display: flex; justify-content: space-between; align-items: center;
    }
    .page-header h2 { font-weight: 600; margin: 0; font-size: 2rem; display: flex; align-items: center; gap: 12px; }
    .page-header h2 i { font-size: 1.8rem; }
    .btn-back {
      background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
      color: #fff; padding: 10px 20px; border-radius: 8px; font-weight: 500;
      text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-back:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); box-shadow: var(--shadow-light); }

    .profile-photo-container {
      width: 160px; height: 160px; margin: 0 auto 2.5rem; border-radius: 50%;
      overflow: hidden; border: 5px solid var(--primary-color); box-shadow: var(--shadow-medium);
      display: flex; align-items: center; justify-content: center;
    }
    .profile-photo-container img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
    .profile-photo-container .fa-user-circle { font-size: 8rem; color: var(--text-muted); }

    .details-card { background: var(--card-bg); border-radius: 12px; box-shadow: var(--shadow-light); overflow: hidden; margin-bottom: 2.5rem; }
    .table-profile { width: 100%; border-collapse: collapse; margin: 0; }
    .table-profile th, .table-profile td { padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-light); vertical-align: middle; font-size: 0.95rem; }
    .table-profile th { background: var(--info-bg); color: var(--primary-dark); font-weight: 600; width: 30%; text-align: left; border-right: 1px solid var(--border-light); }
    .table-profile td { text-align: left; word-break: break-word; }
    .table-profile tr:last-child th, .table-profile tr:last-child td { border-bottom: none; }
    .table-profile a { color: var(--primary-color); text-decoration: none; }
    .table-profile a:hover { color: var(--primary-dark); text-decoration: underline; }

    .document-img-container { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .document-img { max-width: 150px; height: auto; border-radius: 8px; border: 1px solid var(--border-light); object-fit: contain; box-shadow: var(--shadow-light); transition: 0.2s; cursor: pointer; }
    .document-img:hover { transform: scale(1.03); box-shadow: var(--shadow-medium); }
    .document-icon { font-size: 2.5rem; color: var(--secondary-color); }
    .document-text { font-size: 0.9rem; color: var(--text-muted); }

    .badge { font-size: 0.85rem; padding: 0.4em 0.8em; }

    .action-buttons { display: flex; justify-content: center; gap: 1rem; margin-top: 3rem; }
    .btn-action { border-radius: 8px; padding: 0.75rem 1.5rem; font-size: 0.95rem; font-weight: 600; box-shadow: var(--shadow-light); display: inline-flex; align-items: center; gap: 8px; }
    .btn-secondary.btn-action { background: var(--secondary-color); border-color: var(--secondary-color); }
    .btn-secondary.btn-action:hover { background: #546a78; border-color: #546a78; transform: translateY(-2px); box-shadow: var(--shadow-medium); }
    .btn-warning.btn-action { background: #ffc107; border-color: #ffc107; color: var(--text-dark); }
    .btn-warning.btn-action:hover { background: #e0a800; border-color: #e0a800; transform: translateY(-2px); box-shadow: var(--shadow-medium); }

    @media (max-width: 767.98px) {
      .container { padding: 1.5rem 1rem; }
      .page-header { flex-direction: column; align-items: stretch; padding: 1.2rem 1.5rem; margin-bottom: 1.5rem; }
      .page-header h2 { font-size: 1.5rem; text-align: center; justify-content: center; margin-bottom: 1rem; }
      .btn-back { width: 100%; justify-content: center; }
      .profile-photo-container { width: 140px; height: 140px; margin-bottom: 1.5rem; }
      .profile-photo-container .fa-user-circle { font-size: 7rem; }
      .table-profile th, .table-profile td { display: block; width: 100% !important; text-align: left !important; border-right: none; }
      .table-profile th { background: transparent; color: var(--text-dark); font-weight: 500; padding-bottom: 0; }
      .table-profile td { padding-top: 0.2rem; padding-bottom: 0.8rem; border-bottom: 1px solid var(--border-light); }
      .table-profile tr:last-child td { border-bottom: none; }
      .document-img { max-width: 100px; }
      .document-icon { font-size: 2rem; }
      .action-buttons { flex-direction: column; align-items: stretch; margin-top: 2rem; }
      .btn-action { width: 100%; justify-content: center; padding: 0.6rem 1rem; }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="page-header">
    <h2><i class="fas fa-id-card-alt"></i> Employee Profile</h2>
    <a href="{{ url_for('admin') }}" class="btn-back">
      <i class="fas fa-arrow-left"></i> Back to Admin
    </a>
  </div>

  <!-- Profile Photo -->
  <div class="profile-photo-container">
    {% if employee.employee_photo %}
      <img src="{{ url_for('static', filename='uploads/' + employee.employee_photo) }}" alt="Profile Photo">
    {% else %}
      <i class="fas fa-user-circle"></i>
    {% endif %}
  </div>

  <!-- Details -->
  <div class="details-card">
    <table class="table-profile">
      <tbody>
        <tr><th>Name</th><td class="text-capitalize">{{ employee.name }}</td></tr>
        <tr><th>Email</th><td><a href="mailto:{{ employee.email }}">{{ employee.email }}</a></td></tr>
        <tr><th>Mobile</th><td><a href="tel:{{ employee.mobile }}">{{ employee.mobile }}</a></td></tr>
        <tr><th>Username</th><td>{{ employee.mobile }}</td></tr>
        <tr><th>Aadhaar</th><td>{{ employee.aadhaar or '—' }}</td></tr>
        <tr><th>Address</th><td>{{ employee.address or '—' }}</td></tr>

        <!-- Team & Category -->
        <tr><th>Team</th><td><span class="badge bg-success">{{ employee.team or '—' }}</span></td></tr>
        <tr><th>Category</th><td><span class="badge bg-info text-dark">{{ employee.employee_category or '—' }}</span></td></tr>

        <!-- Punch Rule -->
        <tr><th>Punch Rule</th>
          <td>
            {% if employee.no_out_punch %}
              <span class="badge bg-warning text-dark">No Out-Punch Required</span>
            {% else %}
              <span class="badge bg-secondary">Standard In/Out</span>
            {% endif %}
          </td>
        </tr>

        <!-- Shift -->
        <tr><th>Shift Hours</th><td>{{ employee.shift_hours or 8 }} hrs</td></tr>
        <tr><th>In Time</th><td>{{ employee.in_time or '—' }}</td></tr>
        <tr><th>Out Time</th><td>{{ employee.out_time or '—' }}</td></tr>
        <tr><th>Per Hour Salary</th><td>₹ {{ '%.2f'|format(employee.per_hour_salary|float) if employee.per_hour_salary else '0.00' }}</td></tr>

        <!-- Week Off -->
        <tr>
          <th>Week Off</th>
          <td>
            <div class="d-flex gap-3 flex-wrap">
              {% set days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'] %}
              {% set selected = (employee.week_off_days or '').split(',') %}
              {% for d in days %}
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" disabled {% if d in selected %}checked{% endif %}>
                  <label class="form-check-label">{{ d }}</label>
                </div>
              {% endfor %}
            </div>
          </td>
        </tr>

        <!-- Documents -->
        {% macro doc_row(field, label) %}
          {% if employee[field] %}
            <tr>
              <th>{{ label }}</th>
              <td>
                <div class="document-img-container">
                  {% if '.pdf' in employee[field]|lower %}
                    <a href="{{ url_for('static', filename='uploads/' + employee[field]) }}" target="_blank" class="text-decoration-none text-dark">
                      <i class="fas fa-file-pdf document-icon"></i>
                      <span class="document-text">View PDF</span>
                    </a>
                  {% else %}
                    <a href="{{ url_for('static', filename='uploads/' + employee[field]) }}" target="_blank">
                      <img src="{{ url_for('static', filename='uploads/' + employee[field]) }}" alt="{{ label }}" class="document-img">
                    </a>
                  {% endif %}
                </div>
              </td>
            </tr>
          {% endif %}
        {% endmacro %}

        {{ doc_row('aadhaar_photo', 'Aadhaar Photo') }}
        {{ doc_row('pan_card', 'PAN Card') }}
        {{ doc_row('bank_passbook', 'Bank Passbook') }}
        {{ doc_row('tenth_certificate', '10th Certificate') }}
        {{ doc_row('other_certificate', 'Other Certificate') }}

        <!-- Contact -->
        {% if employee.father_mobile %}
          <tr><th>Father Mobile</th><td><a href="tel:{{ employee.father_mobile }}">{{ employee.father_mobile }}</a></td></tr>
        {% endif %}
        {% if employee.wife_or_mother_mobile %}
          <tr><th>Wife/Mother Mobile</th><td><a href="tel:{{ employee.wife_or_mother_mobile }}">{{ employee.wife_or_mother_mobile }}</a></td></tr>
        {% endif %}
        {% if employee.facebook_profile %}
          <tr><th>Facebook</th><td><a href="{{ employee.facebook_profile }}" target="_blank">{{ employee.facebook_profile }}</a></td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <!-- Actions -->
  <div class="action-buttons">
    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    <a href="{{ url_for('edit_employee', id=employee.id) }}" class="btn btn-warning btn-action">
      <i class="fas fa-edit"></i> Edit Profile
    </a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
